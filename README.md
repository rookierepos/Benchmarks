# Benchmarks

## MessagePack-Csharp vs Protobuf-net vs Newtonsoft.Json

```
BenchmarkDotNet=v0.11.3, OS=Windows 10.0.17763.194 (1809/October2018Update/Redstone5)
Intel Xeon CPU E3-1230 v3 3.30GHz, 1 CPU, 8 logical and 4 physical cores
.NET Core SDK=3.0.100-preview-009812
  [Host] : .NET Core 2.2.0 (CoreCLR 4.6.27110.04, CoreFX 4.6.27110.04), 64bit RyuJIT
  Core   : .NET Core 2.2.0 (CoreCLR 4.6.27110.04, CoreFX 4.6.27110.04), 64bit RyuJIT

Job=Core  Runtime=Core

               Method |     N |            Mean |          Error |          StdDev |          Median | Ratio | RatioSD | Rank |  ByteSize | Gen 0/1k Op | Gen 1/1k Op | Gen 2/1k Op | Allocated Memory/Op |
--------------------- |------ |----------------:|---------------:|----------------:|----------------:|------:|--------:|-----:|----------:|------------:|------------:|------------:|--------------------:|
      MspackSerialize |     1 |        400.9 ns |       8.069 ns |        11.04 ns |        399.3 ns |  1.00 |    0.00 |    1 |      75 B |      0.0472 |           - |           - |               200 B |
   LZ4MspackSerialize |     1 |        814.7 ns |      16.186 ns |        36.86 ns |        811.9 ns |  2.05 |    0.13 |    2 |      88 B |      0.0486 |           - |           - |               208 B |
       ProtoSerialize |     1 |      1,065.1 ns |      28.436 ns |        82.50 ns |      1,057.0 ns |  2.66 |    0.22 |    3 |      53 B |      0.1736 |           - |           - |               736 B |
        JsonSerialize |     1 |      1,792.0 ns |      97.416 ns |       277.93 ns |      1,680.3 ns |  5.25 |    0.76 |    4 |     117 B |      0.4005 |           - |           - |              1696 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
    MspackDeserialize |     1 |        374.7 ns |       7.670 ns |        19.93 ns |        369.6 ns |  1.00 |    0.00 |    1 |         - |      0.0491 |           - |           - |               208 B |
 LZ4MspackDeserialize |     1 |        512.0 ns |      15.783 ns |        46.04 ns |        501.5 ns |  1.37 |    0.15 |    2 |         - |      0.0491 |           - |           - |               208 B |
     ProtoDeserialize |     1 |      1,704.7 ns |      68.671 ns |       198.13 ns |      1,678.2 ns |  4.55 |    0.63 |    3 |         - |      0.1316 |           - |           - |               552 B |
      JsonDeserialize |     1 |      2,855.7 ns |      57.001 ns |       137.66 ns |      2,858.8 ns |  7.63 |    0.50 |    4 |         - |      0.6866 |           - |           - |              2888 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
      MspackSerialize |    10 |      4,162.2 ns |      82.440 ns |       200.67 ns |      4,124.7 ns |  1.00 |    0.00 |    1 |     743 B |      0.3204 |           - |           - |              1376 B |
   LZ4MspackSerialize |    10 |      8,263.6 ns |     201.030 ns |       570.29 ns |      8,138.8 ns |  2.01 |    0.18 |    2 |     294 B |      0.3357 |           - |           - |              1464 B |
       ProtoSerialize |    10 |     10,511.3 ns |     243.341 ns |       682.35 ns |     10,400.4 ns |  2.50 |    0.20 |    3 |     542 B |      1.6022 |           - |           - |              6736 B |
        JsonSerialize |    10 |     16,019.5 ns |     319.601 ns |       885.61 ns |     15,868.3 ns |  3.87 |    0.28 |    4 |   1.13 KB |      3.8910 |           - |           - |             16344 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
    MspackDeserialize |    10 |      4,100.9 ns |      88.183 ns |       255.84 ns |      4,097.9 ns |  1.00 |    0.00 |    1 |         - |      0.3433 |           - |           - |              1464 B |
 LZ4MspackDeserialize |    10 |      5,014.5 ns |     100.183 ns |       277.61 ns |      4,986.3 ns |  1.22 |    0.08 |    2 |         - |      0.3433 |           - |           - |              1464 B |
     ProtoDeserialize |    10 |     15,310.5 ns |     305.262 ns |       776.99 ns |     15,113.7 ns |  3.73 |    0.31 |    3 |         - |      1.1597 |           - |           - |              4904 B |
      JsonDeserialize |    10 |     27,725.3 ns |     571.640 ns |     1,621.65 ns |     27,503.8 ns |  6.80 |    0.60 |    4 |         - |      6.7139 |           - |           - |             28264 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
      MspackSerialize |   100 |     38,557.8 ns |     767.301 ns |     2,048.08 ns |     37,913.7 ns |  1.00 |    0.00 |    1 |   7.41 KB |      2.9907 |           - |           - |             12600 B |
   LZ4MspackSerialize |   100 |     73,355.2 ns |   1,451.981 ns |     2,727.17 ns |     73,560.5 ns |  1.90 |    0.12 |    2 |   2.12 KB |      3.2959 |           - |           - |             14128 B |
       ProtoSerialize |   100 |    101,371.2 ns |   2,064.887 ns |     5,824.05 ns |    100,067.9 ns |  2.65 |    0.21 |    3 |   5.45 KB |     15.7471 |           - |           - |             66208 B |
        JsonSerialize |   100 |    163,274.2 ns |   3,294.893 ns |     8,563.86 ns |    163,615.0 ns |  4.24 |    0.31 |    4 |  11.54 KB |     38.8184 |           - |           - |            162928 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
    MspackDeserialize |   100 |     37,017.4 ns |     731.598 ns |     1,605.87 ns |     36,655.1 ns |  1.00 |    0.00 |    1 |         - |      3.3569 |           - |           - |             14128 B |
 LZ4MspackDeserialize |   100 |     47,183.1 ns |     941.441 ns |     1,768.25 ns |     47,053.5 ns |  1.28 |    0.08 |    2 |         - |      3.3569 |           - |           - |             14128 B |
     ProtoDeserialize |   100 |    144,427.0 ns |   2,808.041 ns |     3,551.27 ns |    144,449.0 ns |  3.85 |    0.20 |    3 |         - |     11.4746 |           - |           - |             48528 B |
      JsonDeserialize |   100 |    285,409.0 ns |   5,667.978 ns |    15,516.00 ns |    281,408.8 ns |  7.73 |    0.53 |    4 |         - |     66.8945 |           - |           - |            282128 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
      MspackSerialize | 10000 |  6,743,924.4 ns | 134,861.138 ns |   278,511.64 ns |  6,689,728.6 ns |  1.00 |    0.00 |    1 | 798.25 KB |    234.3750 |    117.1875 |     39.0625 |           1374524 B |
   LZ4MspackSerialize | 10000 | 10,188,574.7 ns | 201,617.556 ns |   289,153.87 ns | 10,184,284.8 ns |  1.52 |    0.07 |    2 | 204.41 KB |    234.3750 |    125.0000 |     31.2500 |           1462403 B |
       ProtoSerialize | 10000 | 15,080,610.9 ns | 300,509.473 ns |   586,120.65 ns | 14,995,283.1 ns |  2.24 |    0.12 |    3 | 593.42 KB |   1234.3750 |    468.7500 |    187.5000 |           6738805 B |
        JsonSerialize | 10000 | 28,796,515.9 ns | 609,778.285 ns | 1,325,607.81 ns | 28,442,526.9 ns |  4.28 |    0.27 |    4 |   1.18 MB |   3218.7500 |   1343.7500 |    625.0000 |          16453372 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
    MspackDeserialize | 10000 |  6,999,358.9 ns | 139,006.116 ns |   185,569.17 ns |  6,999,483.9 ns |  1.00 |    0.00 |    1 |         - |    250.0000 |    109.3750 |     31.2500 |           1534416 B |
 LZ4MspackDeserialize | 10000 |  7,920,339.5 ns | 156,225.610 ns |   197,575.38 ns |  7,972,132.9 ns |  1.13 |    0.04 |    2 |         - |    250.0000 |    109.3750 |     31.2500 |           1534511 B |
     ProtoDeserialize | 10000 | 21,826,664.5 ns | 431,292.713 ns |   937,594.86 ns | 21,651,277.7 ns |  3.17 |    0.15 |    3 |         - |    906.2500 |    343.7500 |    125.0000 |           4974692 B |
      JsonDeserialize | 10000 | 37,606,526.8 ns | 744,312.373 ns | 1,136,643.61 ns | 37,431,838.5 ns |  5.39 |    0.23 |    4 |         - |   6153.8462 |   2000.0000 |    384.6154 |          28334889 B |
```
