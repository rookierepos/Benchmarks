# Benchmarks

## MessagePack-Csharp vs Protobuf-net vs Newtonsoft.Json

```
BenchmarkDotNet=v0.11.3, OS=Windows 10.0.17763.194 (1809/October2018Update/Redstone5)
Intel Xeon CPU E3-1230 v3 3.30GHz, 1 CPU, 8 logical and 4 physical cores
.NET Core SDK=3.0.100-preview-009812
  [Host] : .NET Core 2.2.0 (CoreCLR 4.6.27110.04, CoreFX 4.6.27110.04), 64bit RyuJIT
  Core   : .NET Core 2.2.0 (CoreCLR 4.6.27110.04, CoreFX 4.6.27110.04), 64bit RyuJIT

Job=Core  Runtime=Core

               Method | Count |            Mean |          Error |          StdDev |          Median | Ratio | RatioSD | Rank |  ByteSize | Gen 0/1k Op | Gen 1/1k Op | Gen 2/1k Op | Allocated Memory/Op |
--------------------- |------ |----------------:|---------------:|----------------:|----------------:|------:|--------:|-----:|----------:|------------:|------------:|------------:|--------------------:|
      MspackSerialize |     1 |        411.7 ns |       8.189 ns |        18.15 ns |        410.9 ns |  1.00 |    0.00 |    1 |      75 B |      0.0472 |           - |           - |               200 B |
   LZ4MspackSerialize |     1 |        741.7 ns |      16.257 ns |        40.49 ns |        735.1 ns |  1.81 |    0.13 |    2 |      88 B |      0.0486 |           - |           - |               208 B |
       ProtoSerialize |     1 |        898.3 ns |      15.574 ns |        13.00 ns |        898.0 ns |  2.08 |    0.08 |    3 |      53 B |      0.1745 |           - |           - |               736 B |
        JsonSerialize |     1 |      1,477.5 ns |      28.295 ns |        34.75 ns |      1,482.6 ns |  3.48 |    0.16 |    4 |     117 B |      0.4025 |           - |           - |              1696 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
    MspackDeserialize |     1 |        371.3 ns |       7.438 ns |        15.19 ns |        372.3 ns |  1.00 |    0.00 |    1 |         - |      0.0491 |           - |           - |               208 B |
 LZ4MspackDeserialize |     1 |        434.9 ns |      10.052 ns |        12.71 ns |        430.5 ns |  1.16 |    0.05 |    2 |         - |      0.0491 |           - |           - |               208 B |
     ProtoDeserialize |     1 |      1,421.8 ns |      28.410 ns |        74.34 ns |      1,407.4 ns |  3.87 |    0.23 |    3 |         - |      0.1316 |           - |           - |               552 B |
      JsonDeserialize |     1 |      2,747.5 ns |      54.764 ns |       104.19 ns |      2,734.1 ns |  7.41 |    0.42 |    4 |         - |      0.6866 |           - |           - |              2888 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
      MspackSerialize |    10 |      3,960.1 ns |      78.185 ns |       166.62 ns |      3,924.8 ns |  1.00 |    0.00 |    1 |     743 B |      0.3204 |           - |           - |              1376 B |
   LZ4MspackSerialize |    10 |      7,629.0 ns |     149.139 ns |       272.71 ns |      7,613.1 ns |  1.93 |    0.10 |    2 |     287 B |      0.3357 |           - |           - |              1464 B |
       ProtoSerialize |    10 |      9,593.0 ns |     189.712 ns |       327.24 ns |      9,529.9 ns |  2.43 |    0.13 |    3 |     542 B |      1.6022 |           - |           - |              6736 B |
        JsonSerialize |    10 |     15,599.2 ns |     322.111 ns |       713.77 ns |     15,492.5 ns |  3.95 |    0.26 |    4 |   1.13 KB |      3.8757 |           - |           - |             16344 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
    MspackDeserialize |    10 |      3,855.0 ns |      77.072 ns |       162.57 ns |      3,823.2 ns |  1.00 |    0.00 |    1 |         - |      0.3433 |           - |           - |              1464 B |
 LZ4MspackDeserialize |    10 |      4,658.1 ns |      96.967 ns |       174.85 ns |      4,625.0 ns |  1.20 |    0.06 |    2 |         - |      0.3433 |           - |           - |              1464 B |
     ProtoDeserialize |    10 |     14,654.1 ns |     292.860 ns |       734.73 ns |     14,527.6 ns |  3.78 |    0.20 |    3 |         - |      1.1597 |           - |           - |              4904 B |
      JsonDeserialize |    10 |     26,094.3 ns |     515.799 ns |       573.31 ns |     26,002.6 ns |  6.72 |    0.30 |    4 |         - |      6.7139 |           - |           - |             28264 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
      MspackSerialize |   100 |     36,731.9 ns |     726.347 ns |       836.46 ns |     36,612.1 ns |  1.00 |    0.00 |    1 |   7.41 KB |      2.9907 |           - |           - |             12600 B |
   LZ4MspackSerialize |   100 |     68,151.0 ns |   1,342.582 ns |     1,745.74 ns |     67,738.3 ns |  1.85 |    0.07 |    2 |   2.08 KB |      3.2959 |           - |           - |             14128 B |
       ProtoSerialize |   100 |     92,980.9 ns |   1,858.062 ns |     3,444.04 ns |     92,927.5 ns |  2.54 |    0.13 |    3 |   5.45 KB |     15.7471 |           - |           - |             66208 B |
        JsonSerialize |   100 |    165,060.0 ns |   3,244.791 ns |     5,682.99 ns |    164,564.0 ns |  4.55 |    0.20 |    4 |  11.54 KB |     38.8184 |           - |           - |            162936 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
    MspackDeserialize |   100 |     35,083.2 ns |     696.154 ns |       773.77 ns |     34,972.4 ns |  1.00 |    0.00 |    1 |         - |      3.3569 |           - |           - |             14128 B |
 LZ4MspackDeserialize |   100 |     43,369.8 ns |     859.806 ns |     1,117.99 ns |     43,432.4 ns |  1.24 |    0.05 |    2 |         - |      3.3569 |           - |           - |             14128 B |
     ProtoDeserialize |   100 |    143,433.9 ns |   3,133.327 ns |     3,217.70 ns |    143,327.6 ns |  4.10 |    0.10 |    3 |         - |     11.4746 |           - |           - |             48528 B |
      JsonDeserialize |   100 |    290,018.4 ns |   5,702.266 ns |    11,121.83 ns |    288,188.0 ns |  8.34 |    0.43 |    4 |         - |     66.8945 |           - |           - |            282128 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
      MspackSerialize | 10000 |  6,485,365.1 ns | 121,567.570 ns |   124,840.94 ns |  6,441,527.1 ns |  1.00 |    0.00 |    1 | 798.25 KB |    234.3750 |    117.1875 |     39.0625 |           1374522 B |
   LZ4MspackSerialize | 10000 | 10,290,398.6 ns | 202,272.140 ns |   240,790.59 ns | 10,288,697.4 ns |  1.58 |    0.05 |    2 | 206.09 KB |    234.3750 |    125.0000 |     31.2500 |           1462477 B |
       ProtoSerialize | 10000 | 14,064,827.3 ns | 329,843.757 ns |   440,331.94 ns | 14,049,829.4 ns |  2.18 |    0.06 |    3 | 593.42 KB |   1234.3750 |    468.7500 |    187.5000 |           6738511 B |
        JsonSerialize | 10000 | 26,462,409.5 ns | 527,905.148 ns | 1,427,222.26 ns | 25,960,504.5 ns |  4.21 |    0.21 |    4 |   1.18 MB |   3187.5000 |   1312.5000 |    593.7500 |          16453469 B |
                      |       |                 |                |                 |                 |       |         |      |           |             |             |             |                     |
    MspackDeserialize | 10000 |  6,638,574.0 ns |  93,953.399 ns |    87,884.07 ns |  6,653,109.4 ns |  1.00 |    0.00 |    1 |         - |    250.0000 |    109.3750 |     31.2500 |           1534429 B |
 LZ4MspackDeserialize | 10000 |  7,596,444.3 ns | 146,344.591 ns |   179,724.30 ns |  7,586,480.3 ns |  1.14 |    0.03 |    2 |         - |    250.0000 |    109.3750 |     31.2500 |           1534462 B |
     ProtoDeserialize | 10000 | 20,119,677.3 ns | 472,616.145 ns |   544,265.45 ns | 19,977,622.7 ns |  3.03 |    0.10 |    3 |         - |    906.2500 |    343.7500 |    125.0000 |           4974530 B |
      JsonDeserialize | 10000 | 38,030,589.7 ns | 731,449.497 ns |   684,198.31 ns | 37,893,115.4 ns |  5.73 |    0.12 |    4 |         - |   6153.8462 |   2000.0000 |    384.6154 |          28334841 B |
```
